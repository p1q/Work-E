<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LinkedIn Callback</title>
</head>
<body>
  <div id="message" style="color: red; font-weight: bold;"></div>

  <div id="user-info" style="display: none;">
    <h2>Інформація про користувача</h2>
    <p><strong>ID:</strong> <span id="uid"></span></p>
    <p><strong>Email:</strong> <span id="uemail"></span></p>
    <p><strong>Ім’я:</strong> <span id="ufirst"></span></p>
    <p><strong>Прізвище:</strong> <span id="ulast"></span></p>
    <p><strong>Username:</strong> <span id="uuname"></span></p>
  </div>

  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const msgEl = document.getElementById('message');
      const infoEl = document.getElementById('user-info');

      if (params.has('error')) {
        msgEl.textContent = 'Помилка: ' + params.get('error');
        return;
      }

      // извлекаем токены
      const access = params.get('access');
      const refresh = params.get('refresh');

      if (!access || !refresh) {
        msgEl.textContent = 'Не отримано токени.';
        return;
      }

      // сохраняем
      localStorage.setItem('access_token', access);
      localStorage.setItem('refresh_token', refresh);

      // отображаем user-info
      document.getElementById('uid').textContent    = params.get('uid');
      document.getElementById('uemail').textContent = params.get('email');
      document.getElementById('ufirst').textContent = params.get('first_name');
      document.getElementById('ulast').textContent  = params.get('last_name');
      document.getElementById('uuname').textContent = params.get('username');
      infoEl.style.display = 'block';
    })();
  </script>
</body>
</html>
